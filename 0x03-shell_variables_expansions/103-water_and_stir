#!/bin/bash
# 103-water_and_stir: Add WATER and STIR in custom bases and print in base BESTCHOL

# Define the custom bases
water="w a t e r"
stir="s t i r"
bestchol="b e s t c h o l"

# Remove spaces from the strings
water=${water// /}
stir=${stir// /}
bestchol=${bestchol// /}

# Function to convert from custom base to decimal
to_decimal() {
    num=$1
    base_chars=$2
    base_len=${#base_chars}
    result=0
    len=${#num}
    for (( i=0; i<$len; i++ )); do
        char="${num:$i:1}"
        # Get index of char in base_chars
        index=$(expr index "$base_chars" "$char")
        index=$((index - 1))  # expr index is 1-based
        result=$((result * base_len + index))
    done
    echo $result
}

# Function to convert from decimal to custom base
from_decimal() {
    num=$1
    base_chars=$2
    base_len=${#base_chars}
    result=""
    if [ $num -eq 0 ]; then
        echo "${base_chars:0:1}"
        return
    fi
    while [ $num -gt 0 ]; do
        rem=$((num % base_len))
        result="${base_chars:$rem:1}$result"
        num=$((num / base_len))
    done
    echo "$result"
}

# Convert WATER and STIR to decimal
water_dec=$(to_decimal "$WATER" "$water")
stir_dec=$(to_decimal "$STIR" "$stir")

# Add them
sum=$((water_dec + stir_dec))

# Convert sum to BESTCHOL
echo "$(from_decimal $sum $bestchol)"
